# Общее описание

Приложение разработано на языке Swift, с использованием архитектурнго паттерна VIPER + Coordinators. В среде разработки Xcode. Использует API Skyscanner для доступа к данным о перелетах. Для iOS 11+.

# Установка

Для установки и запуска проекта, необходимо выполнить следующие шаги:
* Клонировать репозиторий. Например, для HTTPS, необходимо выполнить команду в терминале `git clone https://github.com/grisme/bestflight.git /path/to/project`
* После успешного клонировани, необходимо установить внешние зависимости через Cocoapods. Для этого необходимо выполнить команду `pod install` в директории проекта
* После установки внешних зависимостей, необходимо открыть workspace проекта

# UI

Для разработки UI применен метод так называемой "верстки кодом", с использованием SnapKit для поддержки AutoLayout. Приложение так же поддерживает темную тему. Для скорости, никаких дизайнерских изысков не реализовано. Используются практически только нативные элементы UIKit.

Добавлена поддержка мультиязычности. Так же заложена возмножность менять язык динамически в приложении. Можно протестировать на flow первого запуска. Динамическое переключение реализовывать в основном приложении не стал, так же для скорости, но возможность заложена.

# Немного о структуре проекта

Как и во всех классических проектах приложений для iOS, после запуска выполнение передается в AppDelegate, который находится в директории `Application/AppDelegate.swift`. Делегат приложения производит конфигурирование UIWindow, в котором будет работать приложение и передает его в AppCoodinator, запуская его.

Весь роутинг в приложении построен на основе координаторов. Основным является AppCoodinator. При запуске, он определяет режим запуска приложения (первый запуск или нет) и передает управление в соответствующий дочерний координатор. Дочерних координаторов у него два: Main и FirstStart. При запуске приложения: если запуск первый (нет установленных параметров пользователя), то запустится FirstStart. Если параметры есть, соответственно сразу Main.

FirstStart - отвечает за первый запуск, собирает первые параметры пользователя, такие как язык приложения, страна и валюта. После завершения выполнения, сообщает родительскому координатору AppCoodinator через свой Output-интерфейс о том, что закончил работу и передает собранные параметры через специальный контракт. На основе него, AppCoordinator формирует модель параметров пользователя, сохраняет их и запускает основной flow - Main.

Main - это координатор обычной работы приложения. Содержит в себе два дочерних координатора и объединяет их в UITabBarController. Дочерние координаторы: FlightSearch (форма поиска и результаты поиска) и Preferences (параметры пользователя).

Каждый координатор не знает в каком режиме он запущен родителем и кто его родительский координатор и не зависит от него, как он располагается во view stack, он отвечает лишь за свой flow.

Так как у каждого координатора свой flow, соответственно он и управляет переходами между подчиненными ему модулями.

Модули так же не знают о том, кто и как их запустил и в каких flow они участвуют. Для них есть только определенные ModuleOutput и ModuleInput протоколы, через которые они могут общаться с "внешним миром".

# Сеть

Для работы с сетью, используется нативный URLSession. За сетевые запросы отвечает `NetworkService`, так же он реализует нативный кэш. 

Для доступа к API, созданы специальные сервисы Flights, Places, Localisation, в которые инжектируется NetworkService и свои запросы они осуществляют именно через него. А сервисы непосредственно инжектируются в модули.

Для простоты доступа к сервисам, реализован ServiceBuilder, который выполняет роль псевдо-сервислокатора, или же фабрики сервисов. ServiceBuilder в основе используется в координаторах, при построении модулей, чтобы инжектировать нужные сервисы в модуль, соответственно.

Система кэширования полностью инкапсулирована в NetworkService, соответственно, модуль, получая какие-то данные через сервис даже не догадывается о том, что данные получены из кэша. Но - само-собой - система кэширования может быть расширена и каждым модулем в отдельности на слое Interactor. Например, модуль мог бы сохранять полученные данные в БД и так далее.